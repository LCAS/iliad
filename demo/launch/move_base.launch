<!-- 
    ROS navigation stack with velocity smoother and safety (reactive) controller
    based on turtlebot move_base.launch
-->
<launch>
	
	 <group ns="robot1"><!-- REMOVE WHEN IT WORKS -->
  

  <!-- include file="$(find turtlebot_navigation)/launch/includes/velocity_smoother.launch.xml"/ -->
  <!-- include file="$(find turtlebot_navigation)/launch/includes/safety_controller.launch.xml"/ -->

  <arg name="odom_topic" default="odom" />
  <arg name="cmd_vel_topic" default="controller/cmd_vel" />

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
  
    <rosparam file="$(find demo)/params/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find demo)/params/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find demo)/params/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find demo)/params/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find demo)/params/base_local_planner_params.yaml" command="load" />
    <rosparam file="$(find demo)/params/dwa_local_planner_params.yaml" command="load" />
    <rosparam file="$(find demo)/params/move_base_params.yaml" command="load" />

    <remap from="cmd_vel" to="$(arg cmd_vel_topic)"/>
    <remap from="odom" to="$(arg odom_topic)"/>
    <remap from="/robot1/map" to="/map" />
  </node>
  
  <node pkg="laser_filters" type="scan_to_scan_filter_chain"
      name="safety_filter">
    <rosparam command="load" file="$(find demo)/params/safety_laser_filter.yaml" />
    <remap from="scan" to="safety_laser" />
    <remap from="scan_filtered" to="safety_laser_fil" />
  </node>
  
  <node pkg="laser_filters" type="scan_to_scan_filter_chain"
      name="nav_filter">
    <rosparam command="load" file="$(find demo)/params/nav_laser_filter.yaml" />
    <remap from="scan" to="nav_laser" />
    <remap from="scan_filtered" to="nav_laser_fil" />
  </node>
  
    
   </group>

</launch>
